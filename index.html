<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Bruno Dutra">
    <meta name="generator" content="Doxygen 1.8.11"/>
    <!--<link rel="icon" href="icons/..."> -->
    <title>Metal</title>
    <link href="octicons.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="metal.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <script>document.body.style.display = "none";</script>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">
            Metal <small>0.2.0</small>
          </a>
        </div>
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a id="download" aria-label="Download from GitHub" href="https://github.com/brunocodutra/metal/archive/v0.2.0.zip">
              <span class="hidden-xs">Download</span>
              <span class="hidden-xs octicon octicon-cloud-download" aria-hidden="true"></span>
              <span class="visible-xs-block mega-octicon octicon-cloud-download" aria-hidden="true"></span>
            </a>
          </li>
          <li>
            <a aria-label="View on GitHub" href="https://github.com/brunocodutra/metal">
              <span class="hidden-xs">View on GitHub</span>
              <span class="hidden-xs octicon octicon-mark-github" aria-hidden="true"></span>
              <span class="visible-xs-block mega-octicon octicon-mark-github" aria-hidden="true"></span>
            </a>
          </li>
        </ul>
      </div>
    </nav>
    <div id="content">
      <div class="container">
        <div class="row">
          <div id="toolbar">
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Documentation</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li><a href="files.html"><span>Headers</span></a></li>
      <li><a href="namespacemembers.html"><span>Alphabetical&#160;Index</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#motivation">Motivation </a></li>
<li class="level1"><a href="#getting_started">Getting Started </a><ul><li class="level2"><a href="#downloading">Downloading </a></li>
<li class="level2"><a href="#installing">Installing </a></li>
<li class="level2"><a href="#using_metal">Using Metal </a></li>
<li class="level2"><a href="#documentation">Documentation </a></li>
<li class="level2"><a href="#header_organization">Header Organization </a></li>
</ul>
</li>
<li class="level1"><a href="#portability">Portability </a><ul><li class="level2"><a href="#status">Current Status </a></li>
</ul>
</li>
<li class="level1"><a href="#concepts">Concepts </a><ul><li class="level2"><a href="#value">Value </a></li>
<li class="level2"><a href="#number">Number </a></li>
<li class="level2"><a href="#expression">Expression </a></li>
<li class="level2"><a href="#lambda">Lambda </a></li>
<li class="level2"><a href="#list">List </a></li>
<li class="level2"><a href="#pair">Pair </a></li>
<li class="level2"><a href="#map">Map </a></li>
</ul>
</li>
<li class="level1"><a href="#metal_in_action">Metal in Action </a><ul><li class="level2"><a href="#parsing_raw_literals">Parsing Raw Literals </a></li>
<li class="level2"><a href="#church_booleans">Church Booleans </a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>Metal is a <a href="#portability">portable</a> header-only <a href="http://en.wikipedia.org/wiki/C%2B%2B14">C++14</a> library designed to make <a href="http://en.wikipedia.org/wiki/Template_metaprogramming">template metaprogramming</a> enjoyable. To that end, it provides a powerful high-level <a href="#concepts">abstraction</a> for compile-time algorithms that mimic the <a href="http://en.cppreference.com/w/cpp/algorithm">standard algorithms library</a>, hence <b>Metal</b> - <b>Meta</b>programming <b>Al</b>gorithms.</p>
<h1><a class="anchor" id="motivation"></a>
Motivation </h1>
<p>Metaprogramming is far from a novelty in the C family, in fact it has been part of everyday C programming since the early days through the <a href="http://en.wikipedia.org/wiki/C_preprocessor">preprocessor</a>. In C++, it was taken to a whole new level with the development of <a href="http://en.wikipedia.org/wiki/Template_metaprogramming">template metaprogramming</a>, a technique that exploits the template system to perform computations during compilation time. Contrary to the C preprocessor, it has long been noticed that <a href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.14.3670">C++ templates are indeed Turing complete</a>, thus consolidating template metaprogramming as the standard idiom for compile time computations in C++.</p>
<p>In March of 2003 the <a href="http://boost.org/doc/libs/1_60_0/libs/mpl/doc">Boost Metaprogramming Library</a>, by Aleksey Gurtovoy and David Abrahams, is officially shipped with Boost version 1.30.0. A masterpiece of template metaprogramming, it went to great lengths to support the widest variety of poorly conforming compilers, abstracting away the nastiest compiler hackery to present a uniform framework that finally could be relied upon, thus playing a crucial role in the dissemination of metaprogramming in C++. The Boost.MPL remained undisputed for almost a decade, but eventually, it started showing its age when <a href="http://en.wikipedia.org/wiki/C%2B%2B11">C++11</a> introduced, among various others, <a href="http://en.cppreference.com/w/cpp/language/parameter_pack">variadic templates</a>, <a href="http://en.cppreference.com/w/cpp/language/type_alias">alias templates</a>, <a href="http://en.cppreference.com/w/cpp/language/decltype">type inference</a> and <a href="http://en.cppreference.com/w/cpp/language/constexpr">constant expressions</a> to the core language. The powerful C++11 machinery enabled the development of whole new metaprogramming <a href="http://pdimov.com/cpp2/simple_cxx11_metaprogramming.html">styles</a> and <a href="http://pdimov.com/cpp2/simple_cxx11_metaprogramming_2.html">techniques</a> with potential to outperform Boost.MPL by orders of magnitude in many instances. Moreover, the need for endless automatically generated boilerplate code could finally be overcome using variadic templates, whereas syntax clutter could be mitigated using alias templates, vastly improving readability.</p>
<p>Eventually, <a href="http://rrsd.com/blincubator.com/bi_suggestion/mpl-lite-or-mpl2/">motivation</a> to modernize Boost.MPL emerged from the Boost community, even though opinions diverged widely on the matter. As diverse has been the development of new metaprogramming libraries with varying degrees of success, most notably <a href="http://github.com/ericniebler/meta">Meta</a>, [Brigand] and <a href="http://boostorg.github.io/hana">Boost.Hana</a>, the latter formally accepted into the Boost distribution in July 2015.</p>
<p>Metal is yet another approach to modern metaprogramming. Its ultimate goal is to be regarded as the natural successor of Boost.MPL in every use case where C++14 is available, delivering greater performance and expressiveness without cluttering the codebase. Although not a perfect drop in replacement for Boost.MPL, Metal follows very similar design principles, except that they have been fine tuned to take advantage of C++14, so migration is meant to be the smoothest possible.</p>
<h1><a class="anchor" id="getting_started"></a>
Getting Started </h1>
<h2><a class="anchor" id="downloading"></a>
Downloading </h2>
<p>There are a few ways to get a copy of Metal, the easiest might be to simply <a href="" class="download">download the latest release</a> as a compressed package.</p>
<p>If you have git installed and would rather have the latest stable Metal, you may consider cloning branch <code>master</code> from GitHub. </p><pre class="fragment">git clone https://github.com/brunocodutra/metal
</pre><p>Likewise, the bleeding edge development version can be obtained by cloning branch <code>develop</code> instead. </p><pre class="fragment">git clone https://github.com/brunocodutra/metal --branch=develop
</pre><div class="panel panel-warning"><div class="panel-heading"><span class="octicon octicon-info"> Note</span></div><div class="panel-body"> During development it is possible that branch <code>develop</code> breaks temporarily. Be sure to check current compilation <a href="#status">status</a> prior to cloning. </div></div><h2><a class="anchor" id="installing"></a>
Installing </h2>
<p>Metal may optionally be installed system-wide to ease integration with external projects, but if you'd rather use Metal locally, you may skip to the <a href="#using_metal">next section</a>.</p>
<p>Make sure to have <a href="http://cmake.org/">CMake</a> v2.8.12 or newer installed on your system, then, from within an empty directory, issue the following commands. </p><pre class="fragment">cmake /path/to/Metal
cmake --build . --target install
</pre><p>At this point Metal's include tree will be copied into <code>/usr/local/include</code> on Unix[-like] systems and <code>C:\Program Files\Metal\include</code> on Windows.</p>
<h2><a class="anchor" id="using_metal"></a>
Using Metal </h2>
<p>To start enjoying metaprogramming, all you need is your compiler to find Metal's include tree.</p>
<p>If you chose to <a href="#installing">install Metal system-wide</a>, make sure the installation prefix is looked up by your compiler. If you use <a href="http://cmake.org/">CMake</a> it should suffice to add the following to your project's configuration. </p><pre class="fragment">find_package(Metal REQUIRED)
include_directories(${METAL_INCLUDE_DIRS})
</pre><p>Otherwise, to use your local copy of Metal, make sure to add its <code>include/</code> sub-directory to the include search paths of your project.</p>
<div class="panel panel-warning"><div class="panel-heading"><span class="octicon octicon-info"> Note</span></div><div class="panel-body"> Some compilers require special flags in order to enable support for C++14, please refer to your compiler's documentation for specific instructions. </div></div><div class="panel panel-info"><div class="panel-heading"><span class="octicon octicon-light-bulb"> Tip</span></div><div class="panel-body"> If you use CMake 3.1 or newer, support for C++14 may be conveniently enabled by simply issuing <code>set(CMAKE_CXX_STANDARD 14)</code> prior to adding any targets. </div></div><h2><a class="anchor" id="documentation"></a>
Documentation </h2>
<p>An offline copy of this documentation may be obtained by cloning branch <code>gh-pages</code>. </p><pre class="fragment">git clone https://github.com/brunocodutra/metal --branch=gh-pages
</pre><p>Alternatively, if you have <a href="http://cmake.org/">CMake</a> and <a href="http://doxygen.org/">Doxygen</a> installed, the documentation may also be built locally. From within an empty directory issue the following commands. </p><pre class="fragment">cmake /path/to/Metal
cmake --build . --target doc
</pre><p>The documentation will be generated into <code>doc/html/</code>.</p>
<p>To browse the documentation offline, simply load <code>index.html</code> on any web browser that supports <a href="http://en.wikipedia.org/wiki/JavaScript">JavaScript</a>.</p>
<h2><a class="anchor" id="header_organization"></a>
Header Organization </h2>
<p>Each header in Metal is named after the construct it defines, so for instance <code><a class="el" href="distinct_8hpp_source.html">distinct.hpp</a></code> defines <code><a class="el" href="group__value.html#ga30ad228df4c135a11c17568852f2066d">metal::distinct</a></code>, while <code><a class="el" href="enumerate_8hpp_source.html">enumerate.hpp</a></code> defines <code><a class="el" href="group__number.html#ga2f36d18d795d117a27bb934bcecd4ee7">metal::enumerate</a></code>.</p>
<p>Headers are semantically organized within modules named after the various <a href="#concepts">concepts</a>. Each module corresponds to a directory in the filesystem, which may also contain sub-directories, that is, sub-modules. For convenience, along each directory one finds a homonimous header file that includes everything therein. The complete hierarchy of modules and headers is available in the <a href="files.html">Headers</a> tab.</p>
<div class="panel panel-danger"><div class="panel-heading"><span class="octicon octicon-stop"> Warning</span></div><div class="panel-body"> Headers within <code>detail/</code> are undocumented and should be expected to undergo breaking changes without prior notice. Directly depending on these headers or on <code>namespace metal::detail</code> is strongly discouraged. </div></div><h1><a class="anchor" id="portability"></a>
Portability </h1>
<p>Great effort is undertaken to keep Metal strictly in conformance with the C++14 standard and compatible with the widest possible variety of compilers. To this end, some of the most popular freely available C++ compilers are actively supported through <a href="http://en.wikipedia.org/wiki/Continuous_integration">Continuous Integration (CI)</a> premisses. GCC and Clang are tested with help of <a href="http://travis-ci.org/brunocodutra/metal">Travis CI</a>, while Microsoft Visual Studio is tested using <a href="http://ci.appveyor.com/project/brunocodutra/metal">Appveyor CI</a>.</p>
<h2><a class="anchor" id="status"></a>
Current Status </h2>
<p>Current compilation status is summarized in the table bellow, if your favorite compiler is not included, please <a href="http://github.com/brunocodutra/metal/issues">let us know</a>.</p>
<table class="doxtable">
<tr>
<th rowspan="2">Compiler </th><th rowspan="2" class="hidden-xs">Minimum Version </th><th colspan="2">Branch  </th></tr>
<tr>
<th>Master </th><th><p class="starttd">Develop </p>
<p class="endtd"></p>
</th></tr>
<tr>
<th>GCC </th><td class="hidden-xs">5 </td><td rowspan="2"><div class="image">
<img src="http://travis-ci.org/brunocodutra/metal.svg?branch=master"  alt="travis.master"/>
</div>
 </td><td rowspan="2"><div class="image">
<img src="http://travis-ci.org/brunocodutra/metal.svg?branch=develop"  alt="travis.develop"/>
</div>
  </td></tr>
<tr>
<th>Clang </th><td class="hidden-xs">3.5  </td></tr>
<tr>
<th>MSVC </th><td class="hidden-xs">14 (2015) </td><td><div class="image">
<img src="http://ci.appveyor.com/api/projects/status/85pk8n05n4r5x103/branch/master?svg=true"  alt="appveyor.master"/>
</div>
 </td><td><div class="image">
<img src="http://ci.appveyor.com/api/projects/status/85pk8n05n4r5x103/branch/develop?svg=true"  alt="appveyor.develop"/>
</div>
  </td></tr>
</table>
<div class="panel panel-warning"><div class="panel-heading"><span class="octicon octicon-info"> Note</span></div><div class="panel-body"> Status badges are updated live to reflect current status as reported by the continuous integration tools. If they don't load correctly that might be due to a temporary network downtime. </div></div><h1><a class="anchor" id="concepts"></a>
Concepts </h1>
<p>Template metaprogramming can be seen as a language of its own right, sharing the same syntax with C++, but having different semantics. Because constructs assume different meanings during template metaprogramming from what they usually mean in an actual C++ context, some key concepts must be defined.</p>
<h2><a class="anchor" id="value"></a>
Value </h2>
<p><a href="#value">Values</a> are the objects of metaprogramming.</p>
<h3>Requirements</h3>
<p>Any type is a <a href="#value">Value</a>.</p>
<h3>Examples</h3>
<div class="fragment"><div class="line"><span class="keyword">using</span> val = int;</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">using</span> val = decltype(3.14);</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">struct </span>val</div><div class="line">{</div><div class="line">    <span class="comment">//...</span></div><div class="line">};</div></div><!-- fragment --> <h3>Counterexamples</h3>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> not_a_val;</div></div><!-- fragment --><div class="fragment"><div class="line">decltype(<span class="keyword">auto</span>) not_a_val = 3.14;</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>...&gt;</div><div class="line"><span class="keyword">struct </span>not_a_val</div><div class="line">{</div><div class="line">    <span class="comment">//...</span></div><div class="line">};</div></div><!-- fragment --> <h2><a class="anchor" id="number"></a>
Number </h2>
<p>A <a href="#number">Number</a> is a compile-time representation of a numerical value.</p>
<h3>Requirements</h3>
<p><code>num</code> is a model of <a href="#number">Number</a> if and only if <code>num</code> is a specialization of <code><a class="el" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number</a></code>.</p>
<div class="panel panel-warning"><div class="panel-heading"><span class="octicon octicon-info"> Note</span></div><div class="panel-body"> <code><a class="el" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number</a>&lt;n&gt;</code> is guaranteed to be an alias template to <code>std::integral_constant&lt;<a class="el" href="group__number.html#ga19f42023f58c6966ce322ff6514a2a7c">metal::int_</a>, n&gt;</code>. </div></div><h3>Examples</h3>
<div class="fragment"><div class="line"><span class="keyword">using</span> num = <a class="code" href="group__number.html#ga2b8268fd8b95748afa8db51554554ba7">metal::false_</a>;</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">using</span> num = <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number</a>&lt;-1&gt;;</div></div><!-- fragment --> <h3>Counterexamples</h3>
<div class="fragment"><div class="line"><span class="keyword">struct </span>not_a_num :</div><div class="line">    <a class="code" href="group__number.html#gadff72c366480cfd6569d65e0e70a2a27">metal::true_</a></div><div class="line">{};</div></div><!-- fragment --> <h3>See Also</h3>
<p><a class="el" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number</a>, <a class="el" href="group__number.html#ga19f42023f58c6966ce322ff6514a2a7c">metal::int_</a></p>
<h2><a class="anchor" id="expression"></a>
Expression </h2>
<p><a href="#expression">Expressions</a>, also called <em>metafunctions</em>, are mappings over the set of <a href="#value">Values</a>.</p>
<h3>Requirements</h3>
<p><code>expr</code> is a model of <a href="#expression">Expression</a> if and only if <code>expr</code> is a class, union or alias template that only expects <a href="#value">Values</a> as arguments.</p>
<h3>Examples</h3>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... vals&gt;</div><div class="line"><span class="keyword">using</span> expr = <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number</a>&lt;<span class="keyword">sizeof</span>...(vals)&gt;;</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> x, <span class="keyword">typename</span> y&gt;</div><div class="line"><span class="keyword">struct </span>expr;</div></div><!-- fragment --> <h3>Counterexamples</h3>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">template</span>&lt;<span class="keyword">typename</span>...&gt; <span class="keyword">class</span>...&gt; <span class="comment">// non-type parameter</span></div><div class="line"><span class="keyword">struct </span>not_an_expr;</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keywordtype">int</span> v&gt; <span class="comment">// non-type parameter</span></div><div class="line"><span class="keyword">using</span> not_an_expr = <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;v&gt;</a>;</div></div><!-- fragment --> <h2><a class="anchor" id="lambda"></a>
Lambda </h2>
<p><a href="#lambda">Lambdas</a>, short for <em>Lambda Expressions</em>, are <a href="http://en.wikipedia.org/wiki/First-class_citizen">first-class</a> <a href="#expression">Expressions</a>. As <a href="#value">Values</a> themselves, <a href="#lambda">Lambdas</a> can serve both as argument as well as return value to other <a href="#expression">Expressions</a> and <a href="#lambda">Lambdas</a>, thus enabling <a href="http://en.wikipedia.org/wiki/Higher-order_function">higher-order</a> composition.</p>
<h3>Requirements</h3>
<p><code>lbd</code> is a model of <a href="#lambda">Lambda</a> if and only if <code>lbd</code> is a specialization of <code><a class="el" href="group__lambda.html#gad1c1dcdd5fae23712d016b52504cbb22">metal::lambda</a></code>.</p>
<h3>Examples</h3>
<div class="fragment"><div class="line"><span class="keyword">using</span> lbd = <a class="code" href="group__lambda.html#gad1c1dcdd5fae23712d016b52504cbb22">metal::lambda&lt;std::add_pointer_t&gt;</a>;</div></div><!-- fragment --> <h3>See Also</h3>
<p><a class="el" href="group__lambda.html#gad1c1dcdd5fae23712d016b52504cbb22">metal::lambda</a>, <a class="el" href="group__lambda.html#gafacca9003bb9e12d31b08a678b108e12">metal::is_lambda</a></p>
<h2><a class="anchor" id="list"></a>
List </h2>
<p>A <a href="#list">List</a> is a sequence of <a href="#value">Values</a>.</p>
<h3>Requirements</h3>
<p><code>list</code> is a model of <a href="#list">List</a> if and only if <code>list</code> is a specialization of <code><a class="el" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list</a></code>.</p>
<h3>Examples</h3>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">list</a> = <a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list&lt;&gt;</a>; <span class="comment">// an empty list</span></div></div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">list</a> = <a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list&lt;int, int*, int&amp;&gt;</a>;</div></div><!-- fragment --> <h3>See Also</h3>
<p><a class="el" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list</a>, <a class="el" href="group__list.html#ga0d35b093a78a38d60906901eb78a5946">metal::is_list</a></p>
<h2><a class="anchor" id="pair"></a>
Pair </h2>
<p>A <a href="#pair">Pair</a> is a couple of <a href="#value">Values</a>.</p>
<h3>Requirements</h3>
<p>A <a href="#pair">Pair</a> is any <a href="#list">List</a> whose size is 2.</p>
<h3>Examples</h3>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="group__pair.html#gafe4f3a3f2854c485c9b455c6ea70271d">pair</a> = <a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list&lt;int, unsigned&gt;</a>;</div></div><!-- fragment --> <h3>See Also</h3>
<p><a class="el" href="group__pair.html#gafe4f3a3f2854c485c9b455c6ea70271d">metal::pair</a>, <a class="el" href="group__pair.html#gac3091dc09ba574a6386bd58842e91eb8">metal::is_pair</a>, <a class="el" href="group__pair.html#gab74a726c430a7ffbad661ca2c7de18e9">metal::first</a>, <a class="el" href="group__pair.html#ga577d96e206b2ea656ffa9df9ce7c3b6e">metal::second</a></p>
<h2><a class="anchor" id="map"></a>
Map </h2>
<p>A <a href="#map">Map</a> is a collection of unique <a href="#value">Values</a>, each of which associated with another <a href="#value">Value</a>.</p>
<h3>Requirements</h3>
<p>A <a href="#map">Map</a> is a <a href="#list">List</a> of <a href="#pair">Pairs</a>, whose first elements are all distinct, that is </p><pre class="fragment">[[k0, v0], ..., [kn, vn]]; ki != kj for all i, j in {0, n} and i != j
</pre><h3>Examples</h3>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="group__map.html#ga794f9d7170b6ad2a82124ede0fbfe742">map</a> = <a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list&lt;&gt;</a>; <span class="comment">// an empty map</span></div></div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="group__map.html#ga794f9d7170b6ad2a82124ede0fbfe742">map</a> = <a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list</a>&lt;</div><div class="line">    <a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list&lt;int, long&gt;</a>,</div><div class="line">    <a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list&lt;float, double&gt;</a></div><div class="line">&gt;;</div></div><!-- fragment --> <h3>Counterexamples</h3>
<div class="fragment"><div class="line"><span class="keyword">using</span> not_a_map = <a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list</a>&lt; <span class="comment">// repeated keys</span></div><div class="line">    <a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list&lt;int, int*&gt;</a>,</div><div class="line">    <a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list&lt;int, int&amp;&gt;</a></div><div class="line">&gt;;</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">using</span> not_a_map = <a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list</a>&lt; <span class="comment">// not a list of pairs</span></div><div class="line">    <a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list&lt;int&gt;</a>,</div><div class="line">    metal::list&lt;int, int&amp;&gt;</div><div class="line">&gt;;</div></div><!-- fragment --> <h3>See Also</h3>
<p><a class="el" href="group__map.html#ga794f9d7170b6ad2a82124ede0fbfe742">metal::map</a>, <a class="el" href="group__map.html#ga74aaca3fae66a7618dff3f439927d9ed">metal::is_map</a>, <a class="el" href="group__map.html#ga3636ee6af332209b8742e6a127f684ff">metal::keys</a>, <a class="el" href="group__map.html#ga1f02a299118058aa6d36c9558cb52771">metal::values</a></p>
<h1><a class="anchor" id="metal_in_action"></a>
Metal in Action </h1>
<p>Enough theory, let's get our hands dirty.</p>
<h2><a class="anchor" id="parsing_raw_literals"></a>
Parsing Raw Literals </h2>
<p>If you ever considered augmenting <a href="http://en.cppreference.com/w/cpp/utility/tuple"><code>std::tuple</code></a>, so that instead of the rather clunky <a href="http://en.cppreference.com/w/cpp/utility/tuple/get"><code>std::get&lt;N&gt;()</code></a></p>
<div class="fragment"><div class="line">static_assert(std::get&lt;1&gt;(std::tuple&lt;int, char, double&gt;{42, <span class="charliteral">&#39;a&#39;</span>, 2.5}) == <span class="charliteral">&#39;a&#39;</span>, <span class="stringliteral">&quot;&quot;</span>);</div></div><!-- fragment --><p> one could just use the more intuitive subscript operator <code>[N]</code></p>
<div class="strike"> <div class="fragment"><div class="line">static_assert(AugmentedTuple&lt;int, char, double&gt;{42, <span class="charliteral">&#39;a&#39;</span>, 2.5}[1] == <span class="charliteral">&#39;a&#39;</span>, <span class="stringliteral">&quot;&quot;</span>);</div></div><!-- fragment --></div><p>you might have come up with something that looks pretty much like this</p>
<div class="strike"> <div class="fragment"><div class="line">constexpr <span class="keyword">auto</span> operator [](std::size_t i)</div><div class="line">    -&gt; std::tuple_element_t&lt;i, std::tuple&lt;T...&gt;&gt;&amp; {</div><div class="line">    <span class="keywordflow">return</span> std::get&lt;i&gt;(*this);</div><div class="line">}</div></div><!-- fragment --></div><p>only to realize the hard way that this is simply not valid C++14.</p>
<blockquote class="doxtable">
<p>error: non-type template argument is not a constant expression </p>
</blockquote>
<p>While the keyword <code>constexpr</code> tells the compiler the value returned by <code>operator ""_c</code> <em>might</em> be a compile time constant, it tells no such thing about its arguments, which may very well be unknown at compile-time.</p>
<p>So how can we convince the compiler that indices are always known at compile-time? We refactor the subscript operator to take an instance of <code><a class="el" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number</a></code>.</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... T&gt;</div><div class="line"><span class="keyword">struct </span>AugmentedTuple :</div><div class="line">    std::tuple&lt;T...&gt;</div><div class="line">{</div><div class="line">    <span class="keyword">using</span> std::tuple&lt;T...&gt;::tuple;</div><div class="line"></div><div class="line">    <span class="keyword">template</span>&lt;metal::<span class="keywordtype">int</span>_ i&gt;</div><div class="line">    constexpr <span class="keyword">auto</span> operator [](<a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;i&gt;</a>)</div><div class="line">        -&gt; std::tuple_element_t&lt;i, std::tuple&lt;T...&gt;&gt;&amp; {</div><div class="line">        <span class="keywordflow">return</span> std::get&lt;i&gt;(*this);</div><div class="line">    }</div><div class="line">};</div></div><!-- fragment --><p> Since <code>i</code> in this context is already a template argument, the compiler has no reason to complain about passing it on as an argument to other template instantiations.</p>
<div class="fragment"><div class="line">static_assert(AugmentedTuple&lt;int, char, double&gt;{42, <span class="charliteral">&#39;a&#39;</span>, 2.5}[<a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;1&gt;</a>{}] == <span class="charliteral">&#39;a&#39;</span>, <span class="stringliteral">&quot;&quot;</span>);</div></div><!-- fragment --><p> That looks promising, but then again isn't <code><a class="el" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number</a>&lt;1&gt;{}</code> just as clunky as <code>std::get&lt;1&gt;()</code>? Yes. Absolutely.</p>
<p>That's where <a href="http://en.cppreference.com/w/cpp/language/user_literal">literal operators</a> come into play.</p>
<div class="fragment"><div class="line">static_assert(AugmentedTuple&lt;int, char, double&gt;{42, <span class="charliteral">&#39;a&#39;</span>, 2.5}[1_c] == <span class="charliteral">&#39;a&#39;</span>, <span class="stringliteral">&quot;&quot;</span>);</div></div><!-- fragment --><p> We're are getting there, but how is <code>_c</code> implemented again?</p>
<p>At a first glance it might be tempting to try something like this</p>
<div class="strike"> <div class="fragment"><div class="line">constexpr <span class="keyword">auto</span> <span class="keyword">operator</span> <span class="stringliteral">&quot;&quot;</span>_c(<span class="keywordtype">long</span> <span class="keywordtype">long</span> i)</div><div class="line">    -&gt; <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;i&gt;</a> {</div><div class="line">    <span class="keywordflow">return</span> {};</div><div class="line">}</div></div><!-- fragment --></div><p>but do not forget why we're here to begin with, recall we can't instantiate a template using a non-constexpr variable as argument!</p>
<p>At this point, a watchful reader might argue that in theory there is no real reason for this to be rejected, since the literal value must always be known at compile-time and that makes a lot of sense indeed, but unfortunately that's just not how it works. All is not lost however, because we can still parse raw literals, that is, we are in for some fun!</p>
<h3>The Raw Literal Operator Template</h3>
<p>Raw literal operator templates in C++ are defined as a nullary constexpr function templated over <code>char...</code></p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keywordtype">char</span>... cs&gt;</div><div class="line">constexpr <span class="keyword">auto</span> <span class="keyword">operator</span> <span class="stringliteral">&quot;&quot;</span>_raw()</div><div class="line">    -&gt; <a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers</a>&lt;cs...&gt; {</div><div class="line">    <span class="keywordflow">return</span> {};</div><div class="line">}</div></div><!-- fragment --><p> where <code>cs...</code> are mapped to the exact characters that make up the literal, including the prefixes <code>0x</code> and <code>0b</code></p>
<div class="fragment"><div class="line">IS_SAME(decltype(371_raw), <a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers&lt;'3', '7', '1'&gt;</a>);</div><div class="line">IS_SAME(decltype(0x371_raw), <a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers&lt;'0', 'x', '3', '7', '1'&gt;</a>);</div></div><!-- fragment --><p> as well as digit separators</p>
<div class="fragment"><div class="line">IS_SAME(decltype(3<span class="charliteral">&#39;7&#39;</span>1_raw), <a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers&lt;'3', '\'', '7', '\'', '1'&gt;</a>);</div></div><!-- fragment --> <h3>The <code>operator ""_c</code></h3>
<p>We start by defining the literal operator <code>_c</code> as a function that forwards the raw literal characters as a <a href="#list">List</a> of <a href="#number">Numbers</a> to <code>parse_number</code> and returns a default constructed object of whatever type aliases to. In this case it is guaranteed to be a <a href="#number">Number</a>.</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keywordtype">char</span>... cs&gt;</div><div class="line">constexpr <span class="keyword">auto</span> <span class="keyword">operator</span> <span class="stringliteral">&quot;&quot;</span>_c()</div><div class="line">    -&gt; parse_number&lt;<a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers</a>&lt;cs...&gt;&gt; {</div><div class="line">    <span class="keywordflow">return</span> {};</div><div class="line">}</div></div><!-- fragment --> <h3>Resolving the Radix</h3>
<p>In its turn <code>parse_number</code> strips the prefix, if any, thus resolving the radix, then forwards the remaining characters to <code>parse_digits</code>, which is in charge of translating the raw characters to the numerical values they represent. The radix and digits are then forwarded to <code>assemble_number</code>, which adds up the individual digits according to the radix.</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> tokens&gt;</div><div class="line"><span class="keyword">struct </span>parse_number_impl</div><div class="line">{};</div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... tokens&gt;</div><div class="line"><span class="keyword">struct </span>parse_number_impl&lt;</div><div class="line">    <a class="code" href="namespacemetal.html">metal</a>::<a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">list</a>&lt;tokens...&gt;</div><div class="line">&gt;</div><div class="line">{</div><div class="line">    <span class="keyword">using</span> type = assemble_number&lt;</div><div class="line">        <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;10&gt;</a>,</div><div class="line">        parse_digits&lt;<a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list</a>&lt;tokens...&gt;&gt;</div><div class="line">    &gt;;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... tokens&gt;</div><div class="line"><span class="keyword">struct </span>parse_number_impl&lt;</div><div class="line">    <a class="code" href="namespacemetal.html">metal</a>::<a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">list</a>&lt;metal::number&lt;&#39;0&#39;&gt;, tokens...&gt;</div><div class="line">&gt;</div><div class="line">{</div><div class="line">    <span class="keyword">using</span> type = assemble_number&lt;</div><div class="line">        <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;8&gt;</a>,</div><div class="line">        parse_digits&lt;<a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list</a>&lt;tokens...&gt;&gt;</div><div class="line">    &gt;;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... tokens&gt;</div><div class="line"><span class="keyword">struct </span>parse_number_impl&lt;</div><div class="line">    <a class="code" href="namespacemetal.html">metal</a>::<a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">list</a>&lt;metal::number&lt;&#39;0&#39;&gt;, metal::number&lt;&#39;x&#39;&gt;, tokens...&gt;</div><div class="line">&gt;</div><div class="line">{</div><div class="line">    <span class="keyword">using</span> type = assemble_number&lt;</div><div class="line">        <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;16&gt;</a>,</div><div class="line">        parse_digits&lt;<a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list</a>&lt;tokens...&gt;&gt;</div><div class="line">    &gt;;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... tokens&gt;</div><div class="line"><span class="keyword">struct </span>parse_number_impl&lt;</div><div class="line">    <a class="code" href="namespacemetal.html">metal</a>::<a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">list</a>&lt;metal::number&lt;&#39;0&#39;&gt;, metal::number&lt;&#39;X&#39;&gt;, tokens...&gt;</div><div class="line">&gt;</div><div class="line">{</div><div class="line">    <span class="keyword">using</span> type = assemble_number&lt;</div><div class="line">        <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;16&gt;</a>,</div><div class="line">        parse_digits&lt;<a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list</a>&lt;tokens...&gt;&gt;</div><div class="line">    &gt;;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... tokens&gt;</div><div class="line"><span class="keyword">struct </span>parse_number_impl&lt;</div><div class="line">    <a class="code" href="namespacemetal.html">metal</a>::<a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">list</a>&lt;metal::number&lt;&#39;0&#39;&gt;, metal::number&lt;&#39;b&#39;&gt;, tokens...&gt;</div><div class="line">&gt;</div><div class="line">{</div><div class="line">    <span class="keyword">using</span> type = assemble_number&lt;</div><div class="line">        <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;2&gt;</a>,</div><div class="line">        parse_digits&lt;<a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list</a>&lt;tokens...&gt;&gt;</div><div class="line">    &gt;;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... tokens&gt;</div><div class="line"><span class="keyword">struct </span>parse_number_impl&lt;</div><div class="line">    <a class="code" href="namespacemetal.html">metal</a>::<a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">list</a>&lt;metal::number&lt;&#39;0&#39;&gt;, metal::number&lt;&#39;B&#39;&gt;, tokens...&gt;</div><div class="line">&gt;</div><div class="line">{</div><div class="line">    <span class="keyword">using</span> type = assemble_number&lt;</div><div class="line">        <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;2&gt;</a>,</div><div class="line">        parse_digits&lt;<a class="code" href="group__list.html#ga45230fa3bb5136fc2c47bb68e962ee94">metal::list</a>&lt;tokens...&gt;&gt;</div><div class="line">    &gt;;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> tokens&gt;</div><div class="line"><span class="keyword">using</span> parse_number = <span class="keyword">typename</span> parse_number_impl&lt;tokens&gt;::type;</div></div><!-- fragment --> <h3>Parsing Digits</h3>
<p>To parse characters into their corresponding numerical value, we must first remove all digit separators. That can be easily accomplished using <code><a class="el" href="group__list.html#gaaefe7044515dfe5a0de5dff02fde9c69">metal::remove</a></code>, which takes a <a href="#list">List</a> <code>l</code> and a <a href="#value">Value</a> <code>v</code> and returns another <a href="#list">List</a> that contains every element from <code>l</code> and in the same order, except for those that are identical to <code>v</code>.</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> tokens = <a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers&lt;'3', '\'', '7', '\'', '1'&gt;</a>;</div><div class="line"></div><div class="line">IS_SAME(</div><div class="line">    <a class="code" href="group__list.html#gaaefe7044515dfe5a0de5dff02fde9c69">metal::remove</a>&lt;tokens, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;'\''&gt;</a>&gt;,</div><div class="line">    <a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers&lt;'3', '7', '1'&gt;</a></div><div class="line">);</div></div><!-- fragment --><p> The remaining characters can then be individually parsed with the help of <code><a class="el" href="group__list.html#gab512eeef770a2fbfe4776fefc07dd321">metal::transform</a></code>, which takes a <a href="#lambda">Lambda</a> <code>lbd</code> and a <a href="#list">List</a> <code>l</code> and returns another <a href="#list">List</a> containing the results of invoking <code>lbd</code> for each element in <code>l</code>. </p><pre class="fragment">[lbd(l[0]), lbd(l[1]), ..., lbd(l[n-2]), lbd(l[n-1])]
</pre><div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> c&gt;</div><div class="line"><span class="keyword">using</span> parse_digit = <a class="code" href="group__number.html#ga2415cf2aee5bcc168a636139ec18a93f">metal::if_</a>&lt;</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'0'&gt;</a>&gt;, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;0&gt;</a>,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'1'&gt;</a>&gt;, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;1&gt;</a>,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'2'&gt;</a>&gt;, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;2&gt;</a>,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'3'&gt;</a>&gt;, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;3&gt;</a>,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'4'&gt;</a>&gt;, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;4&gt;</a>,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'5'&gt;</a>&gt;, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;5&gt;</a>,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'6'&gt;</a>&gt;, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;6&gt;</a>,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'7'&gt;</a>&gt;, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;7&gt;</a>,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'8'&gt;</a>&gt;, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;8&gt;</a>,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'9'&gt;</a>&gt;, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;9&gt;</a>,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'a'&gt;</a>&gt;, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;10&gt;</a>,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'b'&gt;</a>&gt;, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;11&gt;</a>,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'c'&gt;</a>&gt;, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;12&gt;</a>,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'d'&gt;</a>&gt;, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;13&gt;</a>,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'e'&gt;</a>&gt;, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;14&gt;</a>,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'f'&gt;</a>&gt;, <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;15&gt;</a>,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'A'&gt;</a>&gt;, metal::number&lt;10&gt;,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'B'&gt;</a>&gt;, metal::number&lt;11&gt;,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'C'&gt;</a>&gt;, metal::number&lt;12&gt;,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'D'&gt;</a>&gt;, metal::number&lt;13&gt;,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'E'&gt;</a>&gt;, metal::number&lt;14&gt;,</div><div class="line">    <a class="code" href="group__value.html#gaa31c68bc893b6d1beaec615c7ab3c3d0">metal::same&lt;c, metal::number&lt;'F'&gt;</a>&gt;, metal::number&lt;15&gt;</div><div class="line">&gt;;</div></div><!-- fragment --> <div class="fragment"><div class="line">IS_SAME(</div><div class="line">    <a class="code" href="group__list.html#gab512eeef770a2fbfe4776fefc07dd321">metal::transform</a>&lt;<a class="code" href="group__lambda.html#gad1c1dcdd5fae23712d016b52504cbb22">metal::lambda&lt;parse_digit&gt;</a>, <a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers&lt;'3', '7', '1'&gt;</a>&gt;,</div><div class="line">    <a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers&lt;3, 7, 1&gt;</a></div><div class="line">);</div></div><!-- fragment --><p> Notice how integral values of type <code>char</code> are translated into their actual numerical representation.</p>
<p>So there it is</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> tokens&gt;</div><div class="line"><span class="keyword">using</span> parse_digits = <a class="code" href="group__list.html#gab512eeef770a2fbfe4776fefc07dd321">metal::transform</a>&lt;</div><div class="line">    <a class="code" href="group__lambda.html#gad1c1dcdd5fae23712d016b52504cbb22">metal::lambda&lt;parse_digit&gt;</a>,</div><div class="line">    <a class="code" href="group__list.html#gaaefe7044515dfe5a0de5dff02fde9c69">metal::remove&lt;tokens, metal::number&lt;'\''&gt;</a>&gt;</div><div class="line">&gt;;</div></div><!-- fragment --> <h3>Assembling Numbers</h3>
<p>We now turn our attention to <code>assemble_number</code>. It takes the radix and a <a href="#list">List</a> of digits and is in charge of adding them up according to the radix, that is </p><pre class="fragment">D0*radix^(n-1) + D1*radix^(n-2) + ... + D{n-2}*radix + D{n-1}
</pre><p>The first thing we notice is that the <em>ith</em> digit actually corresponds to the <em>(n-1-i)th</em> power of the radix. To make things simpler, we really want to <code><a class="el" href="group__list.html#ga2c0aea004081422865731b1f8a903d53">metal::reverse</a></code> the order of digits.</p>
<div class="fragment"><div class="line">IS_SAME(<a class="code" href="group__list.html#ga2c0aea004081422865731b1f8a903d53">metal::reverse</a>&lt;<a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers&lt;3, 7, 1&gt;</a>&gt;, <a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers&lt;1, 7, 3&gt;</a>);</div></div><!-- fragment --><p> so that it becomes </p><pre class="fragment">D0 + D1*radix + ... + D{n-2}*radix^(n-2) + D{n-1}*radix^(n-1)
</pre><p>Next we need to <code><a class="el" href="group__number.html#ga2f36d18d795d117a27bb934bcecd4ee7">metal::enumerate</a></code> the exponents that correspond to each digit.</p>
<div class="fragment"><div class="line">IS_SAME(</div><div class="line">    <a class="code" href="group__number.html#ga2f36d18d795d117a27bb934bcecd4ee7">metal::enumerate</a>&lt;metal::number&lt;0&gt;, <a class="code" href="group__list.html#ga85e9d81c96ec58af9ac5fddeed68d516">metal::size</a>&lt;<a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers&lt;1, 7, 3&gt;</a>&gt;&gt;,</div><div class="line">    <a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers&lt;0, 1, 2&gt;</a></div><div class="line">);</div></div><!-- fragment --><p> This version of <code><a class="el" href="group__number.html#ga2f36d18d795d117a27bb934bcecd4ee7">metal::enumerate</a></code> takes two <a href="#number">Numbers</a>, <code>start</code> and <code>size</code>, and returns a <a href="#list">List</a> containing a sequence of <a href="#number">Numbers</a> beginning with <code>start</code> and ending in <code>size - 1</code>. </p><pre class="fragment">[start, start + 1, ..., size - 2, size - 1]
</pre><p>To compute each term of the sum, we'll be using <code><a class="el" href="group__list.html#gab512eeef770a2fbfe4776fefc07dd321">metal::transform</a></code> again, but this time it takes a binary <a href="#lambda">Lambda</a> <code>lbd</code> and two <a href="#list">Lists</a> <code>l1</code> and <code>l2</code> and returns a new <a href="#list">List</a> formed by invoking <code>lbd</code> for the elements of <code>l1</code> and <code>l2</code> pairwise. </p><pre class="fragment">[lbd(l1[0], l2[0]), lbd(l1[1], l2[1]), ..., lbd(l1[n-2], l2[n-2]), lbd(l1[n-1], l2[n-1])]
</pre><p>Here we need an <a href="#lambda">Lambda</a> that takes a digit and the corresponding radix exponent and computes a term of the sum. Again we could define an <a href="#expression">Expression</a> for that specific purpose and construct a <a href="#lambda">Lambda</a> from it, much like we did for <code>parse_digit</code>, but instead we'll be using <em>bind expressions</em> here.</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> radix = metal::number&lt;10&gt;;</div><div class="line"><span class="keyword">using</span> digits = <a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers&lt;1, 7, 3&gt;</a>;</div><div class="line"><span class="keyword">using</span> exponents = <a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers&lt;0, 1, 2&gt;</a>;</div><div class="line"></div><div class="line">IS_SAME(</div><div class="line">    <a class="code" href="group__list.html#gab512eeef770a2fbfe4776fefc07dd321">metal::transform</a>&lt;</div><div class="line">        <a class="code" href="group__lambda.html#gadc53fa4741d4ac0f180c937b42534049">metal::bind</a>&lt;</div><div class="line">            <a class="code" href="group__lambda.html#gad1c1dcdd5fae23712d016b52504cbb22">metal::lambda&lt;metal::mul&gt;</a>,</div><div class="line">            <a class="code" href="group__lambda.html#ga2158e3dd5180b12b04dc1dc487fef023">metal::_1</a>,</div><div class="line">            <a class="code" href="group__lambda.html#gadc53fa4741d4ac0f180c937b42534049">metal::bind</a>&lt;</div><div class="line">                <a class="code" href="group__lambda.html#gad1c1dcdd5fae23712d016b52504cbb22">metal::lambda&lt;metal::pow&gt;</a>,</div><div class="line">                <a class="code" href="group__lambda.html#ga5081c9fd7989680f63de992a15132628">metal::quote&lt;radix&gt;</a>,</div><div class="line">                <a class="code" href="group__lambda.html#ga91c75729b0f78f2b5c069aec6cb07ef4">metal::_2</a></div><div class="line">            &gt;</div><div class="line">        &gt;,</div><div class="line">        digits,</div><div class="line">        exponents</div><div class="line">    &gt;,</div><div class="line">    <a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers&lt;1, 70, 300&gt;</a></div><div class="line">);</div></div><!-- fragment --><p> If <em>bind expressions</em> look scary to you, don't panic, we will cover <a href="#expression">Expression</a> composition in detail in our <a href="#church_booleans">next practical example</a>. Here it suffices to know that <em>bind expressions</em> are themselves <a href="#lambda">Lambdas</a> and that <code><a class="el" href="group__lambda.html#ga2158e3dd5180b12b04dc1dc487fef023">metal::_1</a></code> and <code><a class="el" href="group__lambda.html#ga91c75729b0f78f2b5c069aec6cb07ef4">metal::_2</a></code> are Placeholders that get substituted by the first and second arguments with which the <em>bind expression</em> is invoked prior to the recursive evaluation of the <a href="#expression">Expressions</a> that compose the <em>bind expression</em>.</p>
<p>The final step is to sum up the terms, that is we need to invoke <code><a class="el" href="group__number.html#gaa3b88123f6c1842f797fd9775383560f">metal::add</a></code> for the elements contained in a <a href="#list">List</a>. That's where <code><a class="el" href="group__lambda.html#ga2c9e65a1497c421ba4e180fd7300224e">metal::apply</a></code> comes into play.</p>
<div class="fragment"><div class="line">IS_SAME(</div><div class="line">    <a class="code" href="group__lambda.html#ga2c9e65a1497c421ba4e180fd7300224e">metal::apply</a>&lt;<a class="code" href="group__lambda.html#gad1c1dcdd5fae23712d016b52504cbb22">metal::lambda&lt;metal::add&gt;</a>, <a class="code" href="group__number.html#gaa21f095617c7a254cf4e95c9a5377fa9">metal::numbers&lt;1, 70, 300&gt;</a>&gt;,</div><div class="line">    <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;371&gt;</a></div><div class="line">);</div></div><!-- fragment --><p> And there you go</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> radix, <span class="keyword">typename</span> digits&gt;</div><div class="line"><span class="keyword">using</span> assemble_number = <a class="code" href="group__lambda.html#ga2c9e65a1497c421ba4e180fd7300224e">metal::apply</a>&lt;</div><div class="line">    <a class="code" href="group__lambda.html#gad1c1dcdd5fae23712d016b52504cbb22">metal::lambda&lt;metal::add&gt;</a>,</div><div class="line">    <a class="code" href="group__list.html#gab512eeef770a2fbfe4776fefc07dd321">metal::transform</a>&lt;</div><div class="line">        <a class="code" href="group__lambda.html#gadc53fa4741d4ac0f180c937b42534049">metal::bind</a>&lt;</div><div class="line">            <a class="code" href="group__lambda.html#gad1c1dcdd5fae23712d016b52504cbb22">metal::lambda&lt;metal::mul&gt;</a>,</div><div class="line">            <a class="code" href="group__lambda.html#ga2158e3dd5180b12b04dc1dc487fef023">metal::_1</a>,</div><div class="line">            <a class="code" href="group__lambda.html#gadc53fa4741d4ac0f180c937b42534049">metal::bind</a>&lt;</div><div class="line">                <a class="code" href="group__lambda.html#gad1c1dcdd5fae23712d016b52504cbb22">metal::lambda&lt;metal::pow&gt;</a>,</div><div class="line">                <a class="code" href="group__lambda.html#ga5081c9fd7989680f63de992a15132628">metal::quote&lt;radix&gt;</a>,</div><div class="line">                <a class="code" href="group__lambda.html#ga91c75729b0f78f2b5c069aec6cb07ef4">metal::_2</a></div><div class="line">            &gt;</div><div class="line">        &gt;,</div><div class="line">        <a class="code" href="group__list.html#ga2c0aea004081422865731b1f8a903d53">metal::reverse&lt;digits&gt;</a>,</div><div class="line">        <a class="code" href="group__number.html#ga2f36d18d795d117a27bb934bcecd4ee7">metal::enumerate&lt;metal::number&lt;0&gt;</a>, <a class="code" href="group__list.html#ga85e9d81c96ec58af9ac5fddeed68d516">metal::size&lt;digits&gt;</a>&gt;</div><div class="line">    &gt;</div><div class="line">&gt;;</div></div><!-- fragment --> <h3>Fun With <code>operator ""_c</code></h3>
<div class="fragment"><div class="line">IS_SAME(</div><div class="line">    decltype(01234567_c), <span class="comment">//octal</span></div><div class="line">    <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;342391&gt;</a></div><div class="line">);</div><div class="line"></div><div class="line">IS_SAME(</div><div class="line">    decltype(123456789_c), <span class="comment">//decimal</span></div><div class="line">    <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;123456789&gt;</a></div><div class="line">);</div><div class="line"></div><div class="line">IS_SAME(</div><div class="line">    decltype(0xABCDEF_c), <span class="comment">//hexadecimal</span></div><div class="line">    <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;11259375&gt;</a></div><div class="line">);</div></div><!-- fragment --><p> It also works for very long binary literals.</p>
<div class="fragment"><div class="line">IS_SAME(</div><div class="line">    decltype(0b111101101011011101011010101100101011110001000111000111000111000_c),</div><div class="line">    <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;8888888888888888888&gt;</a></div><div class="line">);</div></div><!-- fragment --><p> And ignores digit separators too.</p>
<div class="fragment"><div class="line">IS_SAME(</div><div class="line">    decltype(1<span class="charliteral">&#39;2&#39;</span>3<span class="charliteral">&#39;4&#39;</span>5<span class="charliteral">&#39;6&#39;</span>7<span class="charliteral">&#39;8&#39;</span>9_c),</div><div class="line">    <a class="code" href="group__number.html#gac411a92d2f7b7b88a16c8050151bce1b">metal::number&lt;123456789&gt;</a></div><div class="line">);</div></div><!-- fragment --> <h2><a class="anchor" id="church_booleans"></a>
Church Booleans </h2>
<p>TODO </p>
</div></div><!-- contents -->
        </div>
      </div>
    </div>
    <div id="footer">
      <div class="container">
        <div class="row text-muted">
          <div class="col-md-12">
            <ul class="social-btns">
              <li class="social-btn">
                <iframe class="github-btn" src="https://ghbtns.com/github-btn.html?user=brunocodutra&amp;repo=metal&amp;type=watch&amp;count=true" title="Star on GitHub" height="20" width="100"></iframe>
              </li>
              <li class="social-btn">
                <iframe class="github-btn" src="https://ghbtns.com/github-btn.html?user=brunocodutra&amp;repo=metal&amp;type=fork&amp;count=true" title="Fork on GitHub" height="20" width="102"></iframe>
              </li>
            </ul>
            &copy; Copyright 2015
            <a href="https://github.com/brunocodutra">Bruno Dutra</a>,
            <span class="hidden-xs">Distributed under the</span>
            <a href="http://www.boost.org/LICENSE_1_0.txt">
              Boost Software License, Version 1.0
            </a>
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript" src="jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="bootstrap.min.js"></script>
    <script type="text/javascript" src="metal.js"></script>
  </body>
</html>
